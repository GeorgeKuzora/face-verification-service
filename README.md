# Face Verification Service

Репозиторий с сервисом для проведения верификации лица пользователя.

От приложения ожидается использование [8080 порта](./.devcontainer/docker-compose.yml#L12) внутри контейнера.
На локальном хосте приложение будет доступно на [28080 порту](./.devcontainer/docker-compose.yml#L12).


## Описание сервиса

Сервис верификации изображений пользователей использует брокер сообщений Kafka для получения сообщений о загруженных изображениях пользователей.

Сообщение, получаемое сервисом, включает в себя следующие данные:

- Имя пользователя.
- Путь к файлу с изображением.

Файл с изображением хранится в части файловой системы, которая является общей для данного сервиса и сервиса аутентификации, который принимает и сохраняет изображение пользователя.

Сервис верификации изображения пользователя получает вектор изображения при помощи библиотеки Deepface. Затем он присваивает пользователю флаг `verified` и сохраняет вектор изображения в базе данных.

После обработки файл с изображением удаляется из файловой системы. Это делается для экономии места и повышения безопасности данных пользователя.

## Особенности

- Для верификации лица сервис использует библиотеку [DeepFace](https://pypi.org/project/deepface/).
- Для доступа к функциям сервиса используется API на базе HTTP запросов.
- Для хранения данных сервис использует базу данных [PostgreSQL](https://www.postgresql.org/).
- Для кэширования данных используется [Redis](https://redis.io/).
- Для получения информации о изображении переданном пользователем используется очередь сообщений [kafka](https://kafka.apache.org/).
- Настроена сборка приложения в Docker контейнере.
- Созданы манифесты для развертывания приложения в kubernetes.
- Созданы шаблоны helm для запуска и обновления сервиса в окружении kubernetes.

## Используемые инструменты и технологии

- Python 3.12
- Fast API
- Pydantic
- DeepFace
- Linux
- Docker
- PostgreSQL
- Redis
- Kafka
- Kubernetes

## Локальная разработка и тестирование проекта

Проект разрабатывается в devcontainer. Информацию о том, как запустить проект и работать над ним, можно найти в файле [CONTRIBUTING.md](./CONTRIBUTING.md).
